{% extends "base.html" %}
{% load static i18n %}

{% block title %}Friend{% endblock %}

{% block content %}
<div class="container">
  <div class="row">
    <div class="col-sm-3">
      {% if friend.avatar %}
          <img src="{{ MEDIA_URL }}{{ friend.avatar }}" alt="{{ friend.name }}" class="img-rounded img-responsive center-block" style="max-width:180px;">
      {% endif %}
    </div>
    <div class="col-sm-9">
      <div class="container">
        <div class="row">
          <div class="col-sm-12"><h1>{{ object.name }}</h1></div>
        </div>
        <div class="row">
          <div class="col-sm-6">{% trans 'Profile Link' %}</div>
          <div class="col-sm-6">{{ friend.get_facebook_id_url }}</div>
        </div>
        <div class="row">
          <div class="col-sm-6">{% trans 'Notes' %}</div>
          <div class="col-sm-6">{{ friend.notes|default_if_none:"--" }}</div>
        </div>
        <div class="row">
          <div class="col-sm-6">{% trans 'Current Rank' %}</div>
          <div class="col-sm-6">{{ friend.last_rank}}</div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col-sm-12"><h2>{% trans 'Chart' %}</h2></div>
  </div>
  <div class="row">
    <div class="col-sm-12">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.bundle.min.js"></script>

      <canvas id="friendRankChart"></canvas>

      <script>
          var ctx = document.getElementById("friendRankChart");
          var friendRankChart = new Chart(ctx, {
            type: 'line',
            data: {
              labels: {{ friend.get_rank_timeseries.timestamps|safe }},
              datasets: [{
                label: 'Rank',
                data: {{ friend.get_rank_timeseries.ranks|safe }},
              }],
            },
            options: {
              fill: false,
              responsive: true,
              title: {
                display: true,
                text: 'Rank Timeseries'
              },
              scales: {
                  xAxes: [{
                      type: 'time',
                      display: true,
                      scaleLabel: {
                          display: true,
                          labelString: "Date",
                      }
                  }],
                  yAxes: [{
                      ticks: {
                          beginAtZero: true,
                          reverse:true,
                      },
                      display: true,
                      scaleLabel: {
                          display: true,
                          labelString: "Rank",
                      }
                  }]
                }
              }
          });
      </script>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12">
      {{ friend.get_rank_timeseries.timestamps }}</br>
      {{ friend.get_rank_timeseries.ranks }}
    </div>
  </div>
</div>
{% endblock content %}
